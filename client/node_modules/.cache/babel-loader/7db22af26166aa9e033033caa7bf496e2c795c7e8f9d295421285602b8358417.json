{"ast":null,"code":"var _jsxFileName = \"/Users/carlosgonzalezportela/Desktop/mi-viajes/client/src/components/TravelSearchInterface.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { useSearch } from \"../hooks/useSearch\";\nimport \"../styles.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst PIXABAY_API_KEY = \"51764905-8e303a287ef32fadf628f8018\";\nexport default function TravelSearchInterface() {\n  _s();\n  const [origin, setOrigin] = useState(\"\");\n  const [budget, setBudget] = useState(\"\");\n  const [daysMin, setDaysMin] = useState(\"\");\n  const [daysMax, setDaysMax] = useState(\"\");\n  const [selectedMonth, setSelectedMonth] = useState(\"\");\n  const [filters, setFilters] = useState({});\n  const [sortOrder, setSortOrder] = useState(\"asc\");\n  const [countryImages, setCountryImages] = useState({});\n  const cityCodeMap = {\n    Roma: \"rom\",\n    Berlin: \"ber\",\n    Londres: \"lon\",\n    Madrid: \"mad\",\n    Paris: \"par\",\n    Amsterdam: \"ams\",\n    Tokio: \"tyo\",\n    Nueva_York: \"nyc\",\n    Viena: \"vie\",\n    Bruselas: \"bru\",\n    Sofia: \"sof\",\n    Zagreb: \"zag\",\n    Praga: \"prg\",\n    Copenhague: \"cph\",\n    Tallin: \"tll\",\n    Helsinki: \"hel\",\n    Atenas: \"ath\",\n    Budapest: \"bud\",\n    Dublin: \"dub\",\n    Reykjavik: \"rek\",\n    Riga: \"rix\",\n    Vilna: \"vil\",\n    Luxemburgo: \"lux\",\n    Valeta: \"mlt\",\n    Chisinau: \"kiv\",\n    Podgorica: \"tgd\",\n    Oslo: \"osl\",\n    Varsovia: \"waw\",\n    Lisboa: \"lis\",\n    Bucarest: \"otp\",\n    Moscu: \"mow\",\n    San_Marino: \"smr\",\n    Belgrado: \"beg\",\n    Bratislava: \"bts\",\n    Liubliana: \"lju\",\n    Estocolmo: \"sto\",\n    Berna: \"brn\",\n    Ciudad_del_Vaticano: \"vta\",\n    Andorra_la_Vella: \"alc\",\n    Skopie: \"skp\",\n    Monaco: \"mcm\",\n    Tirana: \"tia\",\n    Oporto: \"opo\",\n    Barcelona: \"bcn\"\n  };\n  const {\n    data: results = [],\n    isFetching: loading,\n    error\n  } = useSearch(filters);\n  const handleSearch = () => {\n    if (!origin) {\n      return alert(\"Por favor selecciona un punto de salida válido.\");\n    }\n    setFilters({\n      origin,\n      budget: Number(budget),\n      daysMin: Number(daysMin),\n      daysMax: Number(daysMax),\n      selectedMonth\n    });\n  };\n  const formatSkyscannerDate = date => {\n    const yy = String(date.getFullYear()).slice(2);\n    const mm = String(date.getMonth() + 1).padStart(2, \"0\");\n    const dd = String(date.getDate()).padStart(2, \"0\");\n    return `${yy}${mm}${dd}`;\n  };\n  const fetchCountryImage = async countryName => {\n    if (countryImages[countryName]) return;\n    const trySearch = async query => {\n      var _data$hits, _data$hits$;\n      const res = await fetch(`https://pixabay.com/api/?key=${PIXABAY_API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&category=places&safesearch=true&per_page=3`);\n      const data = await res.json();\n      return (data === null || data === void 0 ? void 0 : (_data$hits = data.hits) === null || _data$hits === void 0 ? void 0 : (_data$hits$ = _data$hits[0]) === null || _data$hits$ === void 0 ? void 0 : _data$hits$.webformatURL) || null;\n    };\n    try {\n      // 1. Intentar búsqueda directa\n      let imageUrl = await trySearch(countryName);\n\n      // 2. Fallback si no encuentra (puedes expandir según tus destinos)\n      const fallbackMap = {\n        \"EE.UU.\": \"USA\",\n        \"Reino Unido\": \"UK\",\n        \"Países Bajos\": \"Netherlands\",\n        Chequia: \"Czech Republic\",\n        San_Marino: \"San Marino\",\n        \"Ciudad del Vaticano\": \"Vatican City\",\n        Mónaco: \"Monaco\"\n      };\n      if (!imageUrl && fallbackMap[countryName]) {\n        imageUrl = await trySearch(fallbackMap[countryName]);\n      }\n\n      // 3. Último recurso: imagen genérica\n      if (!imageUrl) {\n        imageUrl = await trySearch(\"europe travel landscape\");\n      }\n      if (imageUrl) {\n        setCountryImages(prev => ({\n          ...prev,\n          [countryName]: imageUrl\n        }));\n      } else {\n        console.warn(`No se encontró imagen para ${countryName}`);\n      }\n    } catch (err) {\n      console.error(`Error al buscar imagen para ${countryName}:`, err);\n    }\n  };\n  const filtered = results.filter(dest => {\n    const originCode = cityCodeMap[origin];\n    const destCode = cityCodeMap[dest.name];\n    return originCode && destCode && originCode !== destCode;\n  });\n  const sorted = filtered.slice().sort((a, b) => sortOrder === \"asc\" ? a.avgCost - b.avgCost : b.avgCost - a.avgCost);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"top-bar\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn-theme\",\n        onClick: () => {\n          document.body.classList.toggle(\"light-mode\");\n          localStorage.setItem(\"theme\", document.body.classList.contains(\"light-mode\") ? \"light\" : \"dark\");\n        },\n        children: \"Cambiar tema\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn-logout\",\n        onClick: async () => {\n          await fetch(\"/api/auth/logout\", {\n            method: \"POST\",\n            credentials: \"include\"\n          });\n          window.location.href = \"/login\";\n        },\n        children: \"Cerrar sesi\\xF3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n        className: \"sidebar\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Filtros\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Punto de salida\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            list: \"origin-options\",\n            value: origin,\n            onChange: e => setOrigin(e.target.value),\n            required: true,\n            className: \"input-field\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"datalist\", {\n            id: \"origin-options\",\n            children: Object.entries(cityCodeMap).map(([cityName]) => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: cityName\n            }, cityName, false, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Presupuesto m\\xE1ximo (\\u20AC)\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            value: budget,\n            onChange: e => setBudget(e.target.value),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"D\\xEDas (m\\xEDn \\u2013 m\\xE1x)\", /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\",\n              gap: \"0.5rem\",\n              width: \"100%\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              value: daysMin,\n              onChange: e => setDaysMin(e.target.value),\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              value: daysMax,\n              onChange: e => setDaysMax(e.target.value),\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Mes de salida\", /*#__PURE__*/_jsxDEV(\"select\", {\n            value: selectedMonth,\n            onChange: e => setSelectedMonth(e.target.value),\n            required: true,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"\\u2014\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 15\n            }, this), Array.from({\n              length: 12\n            }, (_, i) => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: i.toString(),\n              children: new Date(0, i).toLocaleString(\"es-ES\", {\n                month: \"long\"\n              })\n            }, i, false, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleSearch,\n          disabled: loading,\n          className: \"btn-search\",\n          children: loading ? \"Buscando…\" : \"Buscar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 11\n        }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"error-text\",\n          children: \"Error al cargar resultados.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"content\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Resultados\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"results-controls\",\n          children: /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"Ordenar por precio:\", /*#__PURE__*/_jsxDEV(\"select\", {\n              value: sortOrder,\n              onChange: e => setSortOrder(e.target.value),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"asc\",\n                children: \"Menor primero\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 261,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"desc\",\n                children: \"Mayor primero\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-grid\",\n          children: sorted.length > 0 ? sorted.map(dest => {\n            const originCode = cityCodeMap[origin];\n            const destCode = cityCodeMap[dest.name];\n            if (!originCode || !destCode) return null;\n\n            // fetch image if needed\n            if (!countryImages[dest.country]) {\n              fetchCountryImage(dest.country);\n            }\n            const today = new Date();\n            const year = today.getFullYear();\n            let departureBaseDate = new Date(year, selectedMonth, 10); // Día 10 por defecto\n            if (departureBaseDate < today) {\n              departureBaseDate.setFullYear(year + 1); // Si ya pasó este año, ir al siguiente\n            }\n            const departureDate = formatSkyscannerDate(departureBaseDate);\n            const returnDate = formatSkyscannerDate(new Date(departureBaseDate.getTime() + daysMin * 24 * 60 * 60 * 1000));\n            const skyscannerUrl = `https://www.skyscanner.es/transporte/vuelos/${originCode}/${destCode}/${departureDate}/${returnDate}/`;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card\",\n              children: [countryImages[dest.country] && /*#__PURE__*/_jsxDEV(\"img\", {\n                src: countryImages[dest.country],\n                alt: `Paisaje de ${dest.country}`,\n                className: \"country-image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 299,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"card-title\",\n                children: [dest.name, \", \", dest.country]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 23\n              }, this), dest.minCost.toFixed(2) !== dest.maxCost.toFixed(2) ? /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Precio:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 310,\n                  columnNumber: 27\n                }, this), \" \\u20AC\", dest.minCost.toFixed(2), \" \\u2013 \\u20AC\", dest.maxCost.toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 309,\n                columnNumber: 25\n              }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Precio:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 315,\n                  columnNumber: 27\n                }, this), \" \\u20AC\", dest.minCost.toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 314,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Idioma:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 319,\n                  columnNumber: 25\n                }, this), \" \", dest.language || \"N/A\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 318,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"P\\xFAblico:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 322,\n                  columnNumber: 25\n                }, this), \" \", (dest.audience || []).join(\", \") || \"N/A\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 321,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: skyscannerUrl,\n                  target: \"_blank\",\n                  rel: \"noopener noreferrer\",\n                  className: \"btn-search-flight\",\n                  children: \"Buscar vuelo\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 326,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 325,\n                columnNumber: 23\n              }, this)]\n            }, dest.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 21\n            }, this);\n          }) : !loading && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Realiza una b\\xFAsqueda para ver resultados.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(TravelSearchInterface, \"0naM2lPgfX7kmXXPzxcvCwUlthA=\", false, function () {\n  return [useSearch];\n});\n_c = TravelSearchInterface;\nvar _c;\n$RefreshReg$(_c, \"TravelSearchInterface\");","map":{"version":3,"names":["React","useState","useSearch","jsxDEV","_jsxDEV","Fragment","_Fragment","PIXABAY_API_KEY","TravelSearchInterface","_s","origin","setOrigin","budget","setBudget","daysMin","setDaysMin","daysMax","setDaysMax","selectedMonth","setSelectedMonth","filters","setFilters","sortOrder","setSortOrder","countryImages","setCountryImages","cityCodeMap","Roma","Berlin","Londres","Madrid","Paris","Amsterdam","Tokio","Nueva_York","Viena","Bruselas","Sofia","Zagreb","Praga","Copenhague","Tallin","Helsinki","Atenas","Budapest","Dublin","Reykjavik","Riga","Vilna","Luxemburgo","Valeta","Chisinau","Podgorica","Oslo","Varsovia","Lisboa","Bucarest","Moscu","San_Marino","Belgrado","Bratislava","Liubliana","Estocolmo","Berna","Ciudad_del_Vaticano","Andorra_la_Vella","Skopie","Monaco","Tirana","Oporto","Barcelona","data","results","isFetching","loading","error","handleSearch","alert","Number","formatSkyscannerDate","date","yy","String","getFullYear","slice","mm","getMonth","padStart","dd","getDate","fetchCountryImage","countryName","trySearch","query","_data$hits","_data$hits$","res","fetch","encodeURIComponent","json","hits","webformatURL","imageUrl","fallbackMap","Chequia","Mónaco","prev","console","warn","err","filtered","filter","dest","originCode","destCode","name","sorted","sort","a","b","avgCost","children","className","onClick","document","body","classList","toggle","localStorage","setItem","contains","fileName","_jsxFileName","lineNumber","columnNumber","method","credentials","window","location","href","type","list","value","onChange","e","target","required","id","Object","entries","map","cityName","style","display","gap","width","Array","from","length","_","i","toString","Date","toLocaleString","month","disabled","country","today","year","departureBaseDate","setFullYear","departureDate","returnDate","getTime","skyscannerUrl","src","alt","minCost","toFixed","maxCost","language","audience","join","rel","_c","$RefreshReg$"],"sources":["/Users/carlosgonzalezportela/Desktop/mi-viajes/client/src/components/TravelSearchInterface.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useSearch } from \"../hooks/useSearch\";\r\nimport \"../styles.css\";\r\n\r\nconst PIXABAY_API_KEY = \"51764905-8e303a287ef32fadf628f8018\";\r\n\r\nexport default function TravelSearchInterface() {\r\n  const [origin, setOrigin] = useState(\"\");\r\n  const [budget, setBudget] = useState(\"\");\r\n  const [daysMin, setDaysMin] = useState(\"\");\r\n  const [daysMax, setDaysMax] = useState(\"\");\r\n  const [selectedMonth, setSelectedMonth] = useState(\"\");\r\n  const [filters, setFilters] = useState({});\r\n  const [sortOrder, setSortOrder] = useState(\"asc\");\r\n  const [countryImages, setCountryImages] = useState({});\r\n\r\n  const cityCodeMap = {\r\n    Roma: \"rom\",\r\n    Berlin: \"ber\",\r\n    Londres: \"lon\",\r\n    Madrid: \"mad\",\r\n    Paris: \"par\",\r\n    Amsterdam: \"ams\",\r\n    Tokio: \"tyo\",\r\n    Nueva_York: \"nyc\",\r\n    Viena: \"vie\",\r\n    Bruselas: \"bru\",\r\n    Sofia: \"sof\",\r\n    Zagreb: \"zag\",\r\n    Praga: \"prg\",\r\n    Copenhague: \"cph\",\r\n    Tallin: \"tll\",\r\n    Helsinki: \"hel\",\r\n    Atenas: \"ath\",\r\n    Budapest: \"bud\",\r\n    Dublin: \"dub\",\r\n    Reykjavik: \"rek\",\r\n    Riga: \"rix\",\r\n    Vilna: \"vil\",\r\n    Luxemburgo: \"lux\",\r\n    Valeta: \"mlt\",\r\n    Chisinau: \"kiv\",\r\n    Podgorica: \"tgd\",\r\n    Oslo: \"osl\",\r\n    Varsovia: \"waw\",\r\n    Lisboa: \"lis\",\r\n    Bucarest: \"otp\",\r\n    Moscu: \"mow\",\r\n    San_Marino: \"smr\",\r\n    Belgrado: \"beg\",\r\n    Bratislava: \"bts\",\r\n    Liubliana: \"lju\",\r\n    Estocolmo: \"sto\",\r\n    Berna: \"brn\",\r\n    Ciudad_del_Vaticano: \"vta\",\r\n    Andorra_la_Vella: \"alc\",\r\n    Skopie: \"skp\",\r\n    Monaco: \"mcm\",\r\n    Tirana: \"tia\",\r\n    Oporto: \"opo\",\r\n    Barcelona: \"bcn\",\r\n  };\r\n\r\n  const { data: results = [], isFetching: loading, error } = useSearch(filters);\r\n\r\n  const handleSearch = () => {\r\n    if (!origin) {\r\n      return alert(\"Por favor selecciona un punto de salida válido.\");\r\n    }\r\n\r\n    setFilters({\r\n      origin,\r\n      budget: Number(budget),\r\n      daysMin: Number(daysMin),\r\n      daysMax: Number(daysMax),\r\n      selectedMonth,\r\n    });\r\n  };\r\n\r\n  const formatSkyscannerDate = (date) => {\r\n    const yy = String(date.getFullYear()).slice(2);\r\n    const mm = String(date.getMonth() + 1).padStart(2, \"0\");\r\n    const dd = String(date.getDate()).padStart(2, \"0\");\r\n    return `${yy}${mm}${dd}`;\r\n  };\r\n\r\n  const fetchCountryImage = async (countryName) => {\r\n    if (countryImages[countryName]) return;\r\n\r\n    const trySearch = async (query) => {\r\n      const res = await fetch(\r\n        `https://pixabay.com/api/?key=${PIXABAY_API_KEY}&q=${encodeURIComponent(\r\n          query\r\n        )}&image_type=photo&category=places&safesearch=true&per_page=3`\r\n      );\r\n      const data = await res.json();\r\n      return data?.hits?.[0]?.webformatURL || null;\r\n    };\r\n\r\n    try {\r\n      // 1. Intentar búsqueda directa\r\n      let imageUrl = await trySearch(countryName);\r\n\r\n      // 2. Fallback si no encuentra (puedes expandir según tus destinos)\r\n      const fallbackMap = {\r\n        \"EE.UU.\": \"USA\",\r\n        \"Reino Unido\": \"UK\",\r\n        \"Países Bajos\": \"Netherlands\",\r\n        Chequia: \"Czech Republic\",\r\n        San_Marino: \"San Marino\",\r\n        \"Ciudad del Vaticano\": \"Vatican City\",\r\n        Mónaco: \"Monaco\",\r\n      };\r\n\r\n      if (!imageUrl && fallbackMap[countryName]) {\r\n        imageUrl = await trySearch(fallbackMap[countryName]);\r\n      }\r\n\r\n      // 3. Último recurso: imagen genérica\r\n      if (!imageUrl) {\r\n        imageUrl = await trySearch(\"europe travel landscape\");\r\n      }\r\n\r\n      if (imageUrl) {\r\n        setCountryImages((prev) => ({ ...prev, [countryName]: imageUrl }));\r\n      } else {\r\n        console.warn(`No se encontró imagen para ${countryName}`);\r\n      }\r\n    } catch (err) {\r\n      console.error(`Error al buscar imagen para ${countryName}:`, err);\r\n    }\r\n  };\r\n\r\n  const filtered = results.filter((dest) => {\r\n    const originCode = cityCodeMap[origin];\r\n    const destCode = cityCodeMap[dest.name];\r\n    return originCode && destCode && originCode !== destCode;\r\n  });\r\n\r\n  const sorted = filtered\r\n    .slice()\r\n    .sort((a, b) =>\r\n      sortOrder === \"asc\" ? a.avgCost - b.avgCost : b.avgCost - a.avgCost\r\n    );\r\n\r\n  return (\r\n    <>\r\n      <div className=\"top-bar\">\r\n        <button\r\n          className=\"btn-theme\"\r\n          onClick={() => {\r\n            document.body.classList.toggle(\"light-mode\");\r\n            localStorage.setItem(\r\n              \"theme\",\r\n              document.body.classList.contains(\"light-mode\") ? \"light\" : \"dark\"\r\n            );\r\n          }}\r\n        >\r\n          Cambiar tema\r\n        </button>\r\n\r\n        <button\r\n          className=\"btn-logout\"\r\n          onClick={async () => {\r\n            await fetch(\"/api/auth/logout\", {\r\n              method: \"POST\",\r\n              credentials: \"include\",\r\n            });\r\n            window.location.href = \"/login\";\r\n          }}\r\n        >\r\n          Cerrar sesión\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"container\">\r\n        <aside className=\"sidebar\">\r\n          <h2>Filtros</h2>\r\n\r\n          <label>\r\n            Punto de salida\r\n            <input\r\n              type=\"text\"\r\n              list=\"origin-options\"\r\n              value={origin}\r\n              onChange={(e) => setOrigin(e.target.value)}\r\n              required\r\n              className=\"input-field\"\r\n            />\r\n            <datalist id=\"origin-options\">\r\n              {Object.entries(cityCodeMap).map(([cityName]) => (\r\n                <option key={cityName} value={cityName} />\r\n              ))}\r\n            </datalist>\r\n          </label>\r\n\r\n          <label>\r\n            Presupuesto máximo (€)\r\n            <input\r\n              type=\"number\"\r\n              value={budget}\r\n              onChange={(e) => setBudget(e.target.value)}\r\n              required\r\n            />\r\n          </label>\r\n          <label>\r\n            Días (mín – máx)\r\n            <div style={{ display: \"flex\", gap: \"0.5rem\", width: \"100%\" }}>\r\n              <input\r\n                type=\"number\"\r\n                value={daysMin}\r\n                onChange={(e) => setDaysMin(e.target.value)}\r\n                required\r\n              />\r\n              <input\r\n                type=\"number\"\r\n                value={daysMax}\r\n                onChange={(e) => setDaysMax(e.target.value)}\r\n                required\r\n              />\r\n            </div>\r\n          </label>\r\n\r\n          <label>\r\n            Mes de salida\r\n            <select\r\n              value={selectedMonth}\r\n              onChange={(e) => setSelectedMonth(e.target.value)}\r\n              required\r\n            >\r\n              <option value=\"\">—</option>\r\n              {Array.from({ length: 12 }, (_, i) => (\r\n                <option key={i} value={i.toString()}>\r\n                  {new Date(0, i).toLocaleString(\"es-ES\", { month: \"long\" })}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </label>\r\n\r\n          <button\r\n            onClick={handleSearch}\r\n            disabled={loading}\r\n            className=\"btn-search\"\r\n          >\r\n            {loading ? \"Buscando…\" : \"Buscar\"}\r\n          </button>\r\n\r\n          {error && <p className=\"error-text\">Error al cargar resultados.</p>}\r\n        </aside>\r\n\r\n        <section className=\"content\">\r\n          <h2>Resultados</h2>\r\n\r\n          <div className=\"results-controls\">\r\n            <label>\r\n              Ordenar por precio:\r\n              <select\r\n                value={sortOrder}\r\n                onChange={(e) => setSortOrder(e.target.value)}\r\n              >\r\n                <option value=\"asc\">Menor primero</option>\r\n                <option value=\"desc\">Mayor primero</option>\r\n              </select>\r\n            </label>\r\n          </div>\r\n\r\n          <div className=\"card-grid\">\r\n            {sorted.length > 0\r\n              ? sorted.map((dest) => {\r\n                  const originCode = cityCodeMap[origin];\r\n                  const destCode = cityCodeMap[dest.name];\r\n                  if (!originCode || !destCode) return null;\r\n\r\n                  // fetch image if needed\r\n                  if (!countryImages[dest.country]) {\r\n                    fetchCountryImage(dest.country);\r\n                  }\r\n\r\n                  const today = new Date();\r\n                  const year = today.getFullYear();\r\n\r\n                  let departureBaseDate = new Date(year, selectedMonth, 10); // Día 10 por defecto\r\n                  if (departureBaseDate < today) {\r\n                    departureBaseDate.setFullYear(year + 1); // Si ya pasó este año, ir al siguiente\r\n                  }\r\n\r\n                  const departureDate = formatSkyscannerDate(departureBaseDate);\r\n                  const returnDate = formatSkyscannerDate(\r\n                    new Date(\r\n                      departureBaseDate.getTime() +\r\n                        daysMin * 24 * 60 * 60 * 1000\r\n                    )\r\n                  );\r\n                  const skyscannerUrl = `https://www.skyscanner.es/transporte/vuelos/${originCode}/${destCode}/${departureDate}/${returnDate}/`;\r\n\r\n                  return (\r\n                    <div key={dest.id} className=\"card\">\r\n                      {countryImages[dest.country] && (\r\n                        <img\r\n                          src={countryImages[dest.country]}\r\n                          alt={`Paisaje de ${dest.country}`}\r\n                          className=\"country-image\"\r\n                        />\r\n                      )}\r\n                      <h3 className=\"card-title\">\r\n                        {dest.name}, {dest.country}\r\n                      </h3>\r\n                      {dest.minCost.toFixed(2) !== dest.maxCost.toFixed(2) ? (\r\n                        <p>\r\n                          <strong>Precio:</strong> €{dest.minCost.toFixed(2)} –\r\n                          €{dest.maxCost.toFixed(2)}\r\n                        </p>\r\n                      ) : (\r\n                        <p>\r\n                          <strong>Precio:</strong> €{dest.minCost.toFixed(2)}\r\n                        </p>\r\n                      )}\r\n                      <p>\r\n                        <strong>Idioma:</strong> {dest.language || \"N/A\"}\r\n                      </p>\r\n                      <p>\r\n                        <strong>Público:</strong>{\" \"}\r\n                        {(dest.audience || []).join(\", \") || \"N/A\"}\r\n                      </p>\r\n                      <p>\r\n                        <a\r\n                          href={skyscannerUrl}\r\n                          target=\"_blank\"\r\n                          rel=\"noopener noreferrer\"\r\n                          className=\"btn-search-flight\"\r\n                        >\r\n                          Buscar vuelo\r\n                        </a>\r\n                      </p>\r\n                    </div>\r\n                  );\r\n                })\r\n              : !loading && <p>Realiza una búsqueda para ver resultados.</p>}\r\n          </div>\r\n        </section>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}