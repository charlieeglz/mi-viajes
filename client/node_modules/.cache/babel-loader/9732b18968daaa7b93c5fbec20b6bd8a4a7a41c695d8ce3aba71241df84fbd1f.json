{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useQuery } from \"@tanstack/react-query\";\nexport function useSearch(filters = {}) {\n  _s();\n  const {\n    origin = \"\",\n    budget = \"\",\n    daysMin = \"\",\n    daysMax = \"\",\n    selectedMonth = \"\"\n  } = filters;\n\n  // Base URL según entorno: producción o desarrollo\n  const baseUrl = import.meta.env.VITE_API_BASE_URL || \"http://localhost:5000\";\n  return useQuery({\n    queryKey: [\"search\", origin, budget, daysMin, daysMax, selectedMonth],\n    enabled: Boolean(origin.trim() && budget !== \"\" && daysMin !== \"\" && daysMax !== \"\" && selectedMonth),\n    queryFn: async () => {\n      const url = `${baseUrl}/api/search?${new URLSearchParams({\n        origin,\n        budget: String(budget),\n        daysMin: String(daysMin),\n        daysMax: String(daysMax),\n        selectedMonth\n      }).toString()}`;\n      const res = await fetch(url, {\n        credentials: \"include\" // mantiene las cookies para la sesión\n      });\n      if (!res.ok) {\n        let text = \"\";\n        try {\n          text = await res.text();\n        } catch {}\n        throw new Error(`Error ${res.status}${text ? \": \" + text : \"\"}`);\n      }\n      return res.json();\n    },\n    staleTime: 1000 * 60 * 5 // 5 minutos\n  });\n}\n_s(useSearch, \"4ZpngI1uv+Uo3WQHEZmTQ5FNM+k=\", false, function () {\n  return [useQuery];\n});","map":{"version":3,"names":["useQuery","useSearch","filters","_s","origin","budget","daysMin","daysMax","selectedMonth","baseUrl","import","meta","env","VITE_API_BASE_URL","queryKey","enabled","Boolean","trim","queryFn","url","URLSearchParams","String","toString","res","fetch","credentials","ok","text","Error","status","json","staleTime"],"sources":["/Users/carlosgonzalezportela/Desktop/mi-viajes/client/src/hooks/useSearch.js"],"sourcesContent":["import { useQuery } from \"@tanstack/react-query\";\n\nexport function useSearch(filters = {}) {\n  const {\n    origin = \"\",\n    budget = \"\",\n    daysMin = \"\",\n    daysMax = \"\",\n    selectedMonth = \"\",\n  } = filters;\n\n  // Base URL según entorno: producción o desarrollo\n  const baseUrl = import.meta.env.VITE_API_BASE_URL || \"http://localhost:5000\";\n\n  return useQuery({\n    queryKey: [\"search\", origin, budget, daysMin, daysMax, selectedMonth],\n    enabled: Boolean(\n      origin.trim() &&\n        budget !== \"\" &&\n        daysMin !== \"\" &&\n        daysMax !== \"\" &&\n        selectedMonth\n    ),\n    queryFn: async () => {\n      const url = `${baseUrl}/api/search?${new URLSearchParams({\n        origin,\n        budget: String(budget),\n        daysMin: String(daysMin),\n        daysMax: String(daysMax),\n        selectedMonth,\n      }).toString()}`;\n\n      const res = await fetch(url, {\n        credentials: \"include\", // mantiene las cookies para la sesión\n      });\n\n      if (!res.ok) {\n        let text = \"\";\n        try {\n          text = await res.text();\n        } catch {}\n        throw new Error(`Error ${res.status}${text ? \": \" + text : \"\"}`);\n      }\n\n      return res.json();\n    },\n    staleTime: 1000 * 60 * 5, // 5 minutos\n  });\n}\n"],"mappings":";AAAA,SAASA,QAAQ,QAAQ,uBAAuB;AAEhD,OAAO,SAASC,SAASA,CAACC,OAAO,GAAG,CAAC,CAAC,EAAE;EAAAC,EAAA;EACtC,MAAM;IACJC,MAAM,GAAG,EAAE;IACXC,MAAM,GAAG,EAAE;IACXC,OAAO,GAAG,EAAE;IACZC,OAAO,GAAG,EAAE;IACZC,aAAa,GAAG;EAClB,CAAC,GAAGN,OAAO;;EAEX;EACA,MAAMO,OAAO,GAAGC,MAAM,CAACC,IAAI,CAACC,GAAG,CAACC,iBAAiB,IAAI,uBAAuB;EAE5E,OAAOb,QAAQ,CAAC;IACdc,QAAQ,EAAE,CAAC,QAAQ,EAAEV,MAAM,EAAEC,MAAM,EAAEC,OAAO,EAAEC,OAAO,EAAEC,aAAa,CAAC;IACrEO,OAAO,EAAEC,OAAO,CACdZ,MAAM,CAACa,IAAI,CAAC,CAAC,IACXZ,MAAM,KAAK,EAAE,IACbC,OAAO,KAAK,EAAE,IACdC,OAAO,KAAK,EAAE,IACdC,aACJ,CAAC;IACDU,OAAO,EAAE,MAAAA,CAAA,KAAY;MACnB,MAAMC,GAAG,GAAG,GAAGV,OAAO,eAAe,IAAIW,eAAe,CAAC;QACvDhB,MAAM;QACNC,MAAM,EAAEgB,MAAM,CAAChB,MAAM,CAAC;QACtBC,OAAO,EAAEe,MAAM,CAACf,OAAO,CAAC;QACxBC,OAAO,EAAEc,MAAM,CAACd,OAAO,CAAC;QACxBC;MACF,CAAC,CAAC,CAACc,QAAQ,CAAC,CAAC,EAAE;MAEf,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAACL,GAAG,EAAE;QAC3BM,WAAW,EAAE,SAAS,CAAE;MAC1B,CAAC,CAAC;MAEF,IAAI,CAACF,GAAG,CAACG,EAAE,EAAE;QACX,IAAIC,IAAI,GAAG,EAAE;QACb,IAAI;UACFA,IAAI,GAAG,MAAMJ,GAAG,CAACI,IAAI,CAAC,CAAC;QACzB,CAAC,CAAC,MAAM,CAAC;QACT,MAAM,IAAIC,KAAK,CAAC,SAASL,GAAG,CAACM,MAAM,GAAGF,IAAI,GAAG,IAAI,GAAGA,IAAI,GAAG,EAAE,EAAE,CAAC;MAClE;MAEA,OAAOJ,GAAG,CAACO,IAAI,CAAC,CAAC;IACnB,CAAC;IACDC,SAAS,EAAE,IAAI,GAAG,EAAE,GAAG,CAAC,CAAE;EAC5B,CAAC,CAAC;AACJ;AAAC5B,EAAA,CA9CeF,SAAS;EAAA,QAYhBD,QAAQ;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}